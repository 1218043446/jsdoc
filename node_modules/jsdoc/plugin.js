if (typeof global.pluginRegistry === 'undefined') {
   global.pluginRegistry = {};
}
registry = global.pluginRegistry;

exports.manager = manager = {
    on: function(name, callback) {
//console.log('on '+name);
        if (!registry.hasOwnProperty(name)) {
            registry[name] = [];
        }
        registry[name].push(callback);
//console.log('on registry '+registry.toSource());
    },
    run: function(name, args) {
//console.log('run '+name);
//consoleconsole.log('run registry '+registry.toSource());
        if (registry.hasOwnProperty(name)) {
            var callbacks = registry[name];
//console.log('callbacks '+callbacks.length);
            for (var i = 0, len = callbacks.length; i < len; i++) {
                callbacks[i].apply(manager, args);
            }
        }
    }

}

