/*
 * Include the Mozilla Narcissus JavaScript parser.
 */
 
(function(global) {
    
    if (typeof require !== 'undefined') {
        if (typeof Narcissus === 'undefined') {
            Narcissus = {};
            
            require("narcissus/lib/jsdefs");
            
            // workaround for rhino, which will throw an exception when trying
            // to eval a const declaration
            if (Narcissus.definitions.consts) try {
                eval(Narcissus.definitions.consts);
            }
            catch (e) {
                Narcissus.definitions.consts = Narcissus.definitions.consts.replace('const ', 'var ');
            }
            
            //require("jsecma5");
            //require("jsmods.js");
            require("narcissus/lib/jslex");
            require("narcissus/lib/jsparse");
        }
        
        exports.Narcissus = Narcissus;
    }
    
})(global|this);